###############################################################################
# tmux config for desktops
###############################################################################
#------------------------------------------------------------------------------
# General settings
#------------------------------------------------------------------------------
set-option -g default-terminal ${TERM}
## enable osc clipboard
set-option -s set-clipboard on
## undercurl support
set-option -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
## underscore colours
set-option -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'
set-option -g escape-time 10
set-option -g history-limit 100000
set-option -g set-titles on
set-option -g set-titles-string '[#S] #T'
set-option -g allow-rename on
set-option -g popup-border-lines 'rounded'
set-window-option -g aggressive-resize on
set-window-option -g automatic-rename on

# Mouse settings
set-option -g mouse on

# Activity settings
set-option -g bell-action any
set-option -g visual-activity on
set-option -g visual-bell off
set-window-option -g monitor-activity off

#------------------------------------------------------------------------------
# Status
#------------------------------------------------------------------------------
set-option -g status-keys vi
set-option -g status-interval 4
set-option -g display-time 1444
# status looks
set-option -g status-style fg=colour244,bg=terminal
set-option -g status-left ''
set-option -g status-right-length 86
set-option -g status-right '#[fg=terminal,bold][%H:%M] #[fg=terminal,bold]%a %b %d %Y'
set-window-option -g window-status-format '#I #W'
set-window-option -g window-status-current-format '⸢#I #W⸥'
set-window-option -g window-status-current-style fg=terminal,bold,bg=terminal,bold
set-window-option -g window-status-bell-style fg=colour001,bg=terminal,bold
# status message
set-option -g message-style fg=terminal,dim,reverse

#------------------------------------------------------------------------------
# Keybindings
#------------------------------------------------------------------------------
unbind C-b
set -g prefix C-a
bind-key -T prefix C-a send-prefix

# persistent floating popup
bind-key M-f if-shell -F '#{==:#{session_name},floated}' { detach-client } { display-popup -h 80% -w 80% -E "tmux new-session -A -s floated" }

# pane manager
bind-key M-p run-shell "$HOME/.tmux/scripts/tmux-popup-pane-manager.sh"

#------------------------------------------------------------------------------
# Sessions
#------------------------------------------------------------------------------
new-session -d -s work -n xerrors 'multitail ~/xerrors.log'
new-window -t work:1 -n explore
send-keys -t work:1 'explore ~' C-m
new-window -t work:2 -n shell
split-window -t work:2 -h
split-window -t work:2 -v
new-window -t work:3 -n shell
send-keys -t work:3 'cd ~/.dotfiles/' C-m
new-window -t work:4 -n shell
send-keys -t work:4 'cd ~/.config/' C-m

new-session -d -s com -n mail
send-keys -t com:0 'mutt' C-m
new-window -t com:1 -n chat
send-keys -t com:1 'weechat' C-m
new-window -t com:2 -n feeds
send-keys -t com:2 'newsboat' C-m
new-window -t com:3 -n explore
send-keys -t com:3 'explore ~' C-m
new-window -t com:4 -n shell
send-keys -t com:4 'cd /usr/local/src/Tools/' C-m
new-window -t com:5 -n shell
new-window -t com:6 -n sys 'su -'
split-window -t com:6 -h -l 40% 'watch -c inxi -xxx -Y -2 -SCs'
split-window -t com:6.1 -v -l 55% 'watch -c sensors -A coretemp-isa-0000'
split-window -t com:6.2 -v -l 55% 'sudo watch -c qlop -r'
send-keys -t com:6.0 'cd /etc/portage' C-m
new-window -t com:7 -n dotfiles
send-keys -t com:7 'cd ~/.dotfiles/' C-m
new-window -t com:8 -n music
send-keys -t com:8 'ncmpcpp' C-m
new-window -t com:9 -n shell

new-session -d -s scratch -n shell
new-window -t scratch:1 -n shell
new-window -t scratch:2 -n shell

select-window -t com:0

# vim: tw=104 cms=#\ %s :
